<%- include('partials/header.ejs') %>



  <div class="min-h-screen bg-gradient-to-br from-gray-950 via-black to-gray-900">

    <% if(error && error.length> 0) { %>
      <div id="flash-message"
        class="fixed top-8 left-1/2 -translate-x-1/2 bg-gradient-to-r from-red-500 to-pink-600 backdrop-blur-lg text-white px-8 py-4 rounded-2xl shadow-2xl z-50 border border-red-300/30 animate-fade-in-down z-9999">
        <div class="flex items-center gap-3">
          <i class="fas fa-exclamation-circle"></i>
          <span>
            <%= error %>
          </span>
        </div>
      </div>
      <% } %>

        <% if(success && success.length> 0) { %>
          <div id="flash-message"
            class="fixed top-8 left-1/2 -translate-x-1/2 bg-gradient-to-r from-blue-500 to-pink-600 backdrop-blur-lg text-white px-8 py-4 rounded-2xl shadow-2xl z-50 border border-red-300/30 animate-fade-in-down z-9999 ">
            <div class="flex items-center gap-3">
              <i class="fas fa-exclamation-circle"></i>
              <span>
                <%= success %>
              </span>
            </div>
          </div>
          <% } %>

            <!-- Hero Section -->
            <div class="relative overflow-hidden">
              <div class="absolute inset-0 bg-gradient-to-r from-blue-500/10 via-transparent to-purple-500/10"></div>
              <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-8">
                <div class="text-center mb-12 fade-in">
                  <h1
                    class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent">
                    Horologium Collection
                  </h1>
                  <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                    Discover timeless masterpieces where precision meets artistry
                  </p>
                </div>
              </div>
            </div>

            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
              <div class="flex flex-col lg:flex-row gap-8">
                <!-- Modern Sidebar Filters -->
                <aside class="w-full lg:w-1/4 lg:sticky lg:top-8 h-fit space-y-8">
                  <!-- Search -->
                  <div class="relative group">
                    <div
                      class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl group-hover:blur-2xl transition-all duration-500">
                    </div>
                    <div class="relative bg-gray-900/80 backdrop-blur-sm border border-gray-800 rounded-2xl p-6">
                      <div class="flex items-center gap-3 mb-1">
                        <i class="fas fa-search text-blue-400"></i>
                        <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300">Search</h3>
                      </div>
                      <input type="text" placeholder="Find your timepiece..."
                        class="w-full mt-3 bg-gray-800/50 border border-gray-700 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all">
                    </div>
                  </div>

                  <!-- Categories -->
                  <div class="relative group">
                    <div
                      class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-2xl blur-xl group-hover:blur-2xl transition-all duration-500">
                    </div>
                    <div class="relative bg-gray-900/80 backdrop-blur-sm border border-gray-800 rounded-2xl p-6">
                      <div class="flex items-center gap-3 mb-6">
                        <i class="fas fa-filter text-blue-400"></i>
                        <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300">Filter by Category</h3>
                      </div>
                      <ul class="space-y-3">
                        <li
                          class="flex justify-between items-center group cursor-pointer p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300">
                          <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-white group-hover:translate-x-2 transition-transform duration-300">All
                              Collections</span>
                          </div>
                          <span class="text-xs font-medium bg-gray-800 px-2 py-1 rounded-full">24</span>
                        </li>
                        <li
                          class="flex justify-between items-center group cursor-pointer p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300">
                          <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-cyan-500 rounded-full"></div>
                            <span
                              class="text-gray-400 group-hover:text-white group-hover:translate-x-2 transition-all duration-300">Automatic</span>
                          </div>
                          <span class="text-xs text-gray-500">12</span>
                        </li>
                        <li
                          class="flex justify-between items-center group cursor-pointer p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300">
                          <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                            <span
                              class="text-gray-400 group-hover:text-white group-hover:translate-x-2 transition-all duration-300">Chronograph</span>
                          </div>
                          <span class="text-xs text-gray-500">8</span>
                        </li>
                        <li
                          class="flex justify-between items-center group cursor-pointer p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300">
                          <div class="flex items-center gap-3">
                            <div class="w-2 h-2 bg-emerald-500 rounded-full"></div>
                            <span
                              class="text-gray-400 group-hover:text-white group-hover:translate-x-2 transition-all duration-300">Diver</span>
                          </div>
                          <span class="text-xs text-gray-500">4</span>
                        </li>
                      </ul>
                    </div>
                  </div>

                  <!-- Price Range -->
                  <div class="relative group">
                    <div
                      class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-2xl blur-xl group-hover:blur-2xl transition-all duration-500">
                    </div>
                    <div class="relative bg-gray-900/80 backdrop-blur-sm border border-gray-800 rounded-2xl p-6">
                      <div class="flex items-center gap-3 mb-6">
                        <i class="fas fa-tag text-emerald-400"></i>
                        <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300">Price Range</h3>
                      </div>
                      <div class="space-y-6">
                        <input type="range" min="0" max="10000" value="10000"
                          class="w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-r [&::-webkit-slider-thumb]:from-blue-500 [&::-webkit-slider-thumb]:to-cyan-500 [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white" />
                        <div class="flex justify-between items-center pt-2">
                          <div class="text-center">
                            <p class="text-xs text-gray-500">Min</p>
                            <p class="text-sm font-semibold text-white">$0</p>
                          </div>
                          <div class="text-center">
                            <p class="text-xs text-gray-500">Max</p>
                            <p class="text-sm font-semibold text-white">$10,000</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Brand Filter -->
                  <div class="relative group">
                    <div
                      class="absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl blur-xl group-hover:blur-2xl transition-all duration-500">
                    </div>
                    <div class="relative bg-gray-900/80 backdrop-blur-sm border border-gray-800 rounded-2xl p-6">
                      <div class="flex items-center gap-3 mb-6">
                        <i class="fas fa-crown text-purple-400"></i>
                        <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300">Brand</h3>
                      </div>
                      <div class="space-y-2">
                        <label
                          class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-gray-800/30 transition-all">
                          <input type="checkbox" class="rounded border-gray-600 text-blue-500 focus:ring-blue-500/50">
                          <span class="text-sm text-gray-300">Rolex</span>
                        </label>
                        <label
                          class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-gray-800/30 transition-all">
                          <input type="checkbox" class="rounded border-gray-600 text-blue-500 focus:ring-blue-500/50">
                          <span class="text-sm text-gray-300">Omega</span>
                        </label>
                        <label
                          class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-gray-800/30 transition-all">
                          <input type="checkbox" class="rounded border-gray-600 text-blue-500 focus:ring-blue-500/50">
                          <span class="text-sm text-gray-300">Tag Heuer</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </aside>

                <!-- Main Content -->
                <main class="w-full lg:w-3/4">
                  <!-- Header with Stats -->
                  <div class="mb-10">
                    <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8">
                      <div>
                        <div class="flex items-center gap-4 mb-2">
                          <h2 class="text-2xl font-bold text-white">Masterpiece Collection</h2>
                          <span
                            class="px-3 py-1 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/30 rounded-full text-xs font-medium text-blue-300">
                            <i class="fas fa-gem mr-1"></i> Premium
                          </span>
                        </div>
                        <p class="text-gray-400">
                          Showing <span class="font-bold text-white text-lg">
                            <%= products.length %>
                          </span> exquisite timepieces
                        </p>
                      </div>

                      <div class="flex items-center gap-4">
                        <div class="relative group">
                          <select
                            class="appearance-none bg-gray-900/80 backdrop-blur-sm border border-gray-800 text-gray-300 text-sm rounded-xl pl-4 pr-10 py-3 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 outline-none transition-all cursor-pointer">
                            <option>Sort by: Featured</option>
                            <option>Price: Low to High</option>
                            <option>Price: High to Low</option>
                            <option>Newest First</option>
                            <option>Most Popular</option>
                          </select>
                          <div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
                            <i class="fas fa-chevron-down text-gray-500"></i>
                          </div>
                        </div>
                        <button
                          class="px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 rounded-xl font-medium text-white transition-all duration-300 hover:scale-105 active:scale-95">
                          <i class="fas fa-sliders-h mr-2"></i> More Filters
                        </button>
                      </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
                      <div
                        class="bg-gradient-to-r from-gray-900/50 to-gray-900/30 backdrop-blur-sm border border-gray-800 rounded-2xl p-4">
                        <div class="flex items-center justify-between">
                          <div>
                            <p class="text-sm text-gray-400">Avg. Price</p>
                            <p class="text-2xl font-bold text-white">$4,250</p>
                          </div>
                          <div
                            class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-500/10 flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-blue-400 text-xl"></i>
                          </div>
                        </div>
                      </div>
                      <div
                        class="bg-gradient-to-r from-gray-900/50 to-gray-900/30 backdrop-blur-sm border border-gray-800 rounded-2xl p-4">
                        <div class="flex items-center justify-between">
                          <div>
                            <p class="text-sm text-gray-400">In Stock</p>
                            <p class="text-2xl font-bold text-white">24 Items</p>
                          </div>
                          <div
                            class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-emerald-500/10 flex items-center justify-center">
                            <i class="fas fa-check-circle text-emerald-400 text-xl"></i>
                          </div>
                        </div>
                      </div>
                      <div
                        class="bg-gradient-to-r from-gray-900/50 to-gray-900/30 backdrop-blur-sm border border-gray-800 rounded-2xl p-4">
                        <div class="flex items-center justify-between">
                          <div>
                            <p class="text-sm text-gray-400">Collections</p>
                            <p class="text-2xl font-bold text-white">6 Series</p>
                          </div>
                          <div
                            class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-500/10 flex items-center justify-center">
                            <i class="fas fa-layer-group text-purple-400 text-xl"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Products Grid -->
                  <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                    <% products.forEach(function(product, index) { %>
                      <div class="group fade-in animation-delay: <%= index * 0.1 %> s">
                        <!-- Product Card -->
                        <div
                          class="relative overflow-hidden rounded-3xl bg-gradient-to-br from-gray-900 to-black border border-gray-800 shadow-2xl transition-all duration-500 group-hover:border-gray-700 group-hover:scale-[1.02] group-hover:shadow-2xl group-hover:shadow-blue-500/10">
                          <!-- Background Glow Effect -->
                          <div
                            class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                          </div>

                          <!-- Product Image -->
                          <div class="relative aspect-[4/5] overflow-hidden">
                            <% if(product.image) { %>
                              <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                                alt="<%= product.name %>"
                                class="h-full w-full object-contain p-8 group-hover:scale-110 transition-transform duration-700" />
                              <% } else { %>
                                <div
                                  class="h-full w-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900">
                                  <i class="fas fa-clock text-gray-700 text-6xl"></i>
                                </div>
                                <% } %>

                                  <!-- Discount Badge -->
                                  <% if(product.discount> 0) { %>
                                    <div class="absolute top-4 right-4">
                                      <span
                                        class="px-3 py-1.5 bg-gradient-to-r from-red-600 to-pink-600 text-white text-xs font-bold rounded-full shadow-lg">
                                        -<%= Math.round((product.discount/(product.price + product.discount))*100) %>%
                                      </span>
                                    </div>
                                    <% } %>

                                      <!-- Quick Actions Overlay -->
                                      <div
                                        class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-end justify-center pb-8">
                                        <div
                                          class="flex gap-3 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                                          <a href="/addtocart/<%= product.id %>">
                                            <button
                                              class="px-5 py-2.5 bg-white text-black text-sm font-bold rounded-xl hover:bg-blue-500 hover:text-white transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg flex items-center gap-2">
                                              <i class="fas fa-shopping-cart"></i>
                                              Add to Cart
                                            </button>
                                          </a>
                                          <a href="/shop/:id">
                                            <button
                                              class="px-5 py-2.5 bg-transparent border-2 border-white/30 text-white text-sm font-bold rounded-xl hover:bg-white hover:text-black transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-2">
                                              <i class="fas fa-eye"></i>
                                              Quick View
                                            </button>
                                          </a>
                                        </div>
                                      </div>
                          </div>

                          <!-- Product Info -->
                          <div class="p-6">
                            <div class="flex justify-between items-start mb-3">
                              <div>
                                <h3
                                  class="text-xl font-bold text-white tracking-tight leading-tight group-hover:text-blue-400 transition-colors">
                                  <%= product.name %>
                                </h3>
                                <div class="flex items-center gap-2 mt-2">
                                  <span class="text-xs px-2 py-1 bg-gray-800/50 rounded-lg text-gray-400">Edition
                                    2026</span>
                                  <span class="text-xs px-2 py-1 bg-blue-500/10 rounded-lg text-blue-400">
                                    <i class="fas fa-crown mr-1"></i>Premium
                                  </span>
                                </div>
                              </div>
                              <div class="text-right">
                                <div class="flex items-center gap-2">
                                  <% if(product.discount> 0) { %>
                                    <p class="text-sm text-red-400 line-through">$<%= product.price + product.discount
                                        %>
                                    </p>
                                    <% } %>
                                      <p
                                        class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
                                        $<%= product.price %>
                                      </p>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Excl. VAT</p>
                              </div>
                            </div>

                            <!-- Rating & Details -->
                            <div class="flex items-center justify-between pt-4 border-t border-gray-800">
                              <div class="flex items-center gap-1">
                                <% for(let i=0; i < 5; i++) { %>
                                  <i class="fas fa-star text-yellow-500 text-xs"></i>
                                  <% } %>
                                    <span class="text-xs text-gray-400 ml-2">(24)</span>
                              </div>
                              <div class="flex items-center gap-4">
                                <button class="text-gray-500 hover:text-white transition-colors">
                                  <i class="far fa-heart"></i>
                                </button>
                                <button class="text-gray-500 hover:text-white transition-colors">
                                  <i class="far fa-chart-bar"></i>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <% }) %>
                  </div>

                  <!-- Load More -->
                  <div class="mt-12 text-center">
                    <button
                      class="px-8 py-3 bg-gradient-to-r from-gray-900 to-black border-2 border-gray-800 text-white rounded-xl font-medium hover:border-gray-700 hover:scale-105 transition-all duration-300">
                      <i class="fas fa-sync-alt mr-2"></i> Load More Collections
                    </button>
                  </div>
                </main>
              </div>
            </div>
  </div>

  <style>
    @keyframes fade-in-down {
      from {
        opacity: 0;
        transform: translate(-50%, -20px);
      }

      to {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }

    .animate-fade-in-down {
      animation: fade-in-down 0.5s ease-out;
    }

    .fade-in {
      opacity: 0;
      animation: fadeIn 0.6s ease-out forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    /* Smooth hover effects */
    .group:hover .group-hover\:scale-110 {
      transform: scale(1.1);
    }

    /* Custom range slider */
    input[type="range"]::-webkit-slider-thumb {
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }
  </style>

  <script>
    // Smoothly hide flash message
    const flash = document.getElementById('flash-message');
    if (flash) {
      setTimeout(() => {
        flash.style.opacity = '0';
        flash.style.transform = 'translate(-50%, -20px)';
        setTimeout(() => flash.remove(), 500);
      }, 3000);
    }

    // Add animation to cards on load
    document.addEventListener('DOMContentLoaded', function () {
      const cards = document.querySelectorAll('.fade-in');
      cards.forEach(card => {
        card.style.opacity = '0';
      });

      setTimeout(() => {
        cards.forEach((card, index) => {
          setTimeout(() => {
            card.style.animation = `fadeIn 0.6s ease-out ${index * 0.1}s forwards`;
          }, 50);
        });
      }, 100);
    });

    // Price range value display
    const priceSlider = document.querySelector('input[type="range"]');
    if (priceSlider) {
      const maxPrice = document.querySelector('.text-right .text-sm.font-bold');
      priceSlider.addEventListener('input', function () {
        if (maxPrice) {
          maxPrice.textContent = `$${this.value}`;
        }
      });
    }
  </script>
  </body>

  </html>